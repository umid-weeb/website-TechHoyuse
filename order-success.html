<!DOCTYPE html>
<html lang="uz">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Buyurtma qabul qilindi | Tech House</title>
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body data-page="success">

  
  <div class="mobile-header mobile-header-simple mobile-header-success">
    <div class="mobile-header-row1">
      <div style="width:40px;"></div>
      <a href="index.html" class="mobile-logo">TECH HOUSE</a>
      <div style="width:40px;"></div>
    </div>
  </div>

  
  <div class="site-header">
    <div class="top-bar">
      <div class="container top-bar-inner">
        <p>299$ dan yuqori buyurtmalar uchun bepul yetkazib berish | Kengaytirilgan kafolat mavjud</p>
        <div class="top-right">
          <span>EN</span>
          <span>USD</span>
        </div>
      </div>
    </div>

    <header class="main-header">
      <div class="container header-inner">
        <div class="logo"><a href="index.html">TECH HOUSE</a></div>

        <div class="search-box">
          <select>
            <option>Barcha kategoriyalar</option>
          </select>
          <input type="search" id="header-search" placeholder="Mahsulot qidirish...">
          <button id="search-btn"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>

        <div class="header-actions">
          <div class="phone">
            <small>Biz bilan bog'lanish:</small>
            <strong>+998 90 791 36 33</strong>
          </div>
          <div class="icons">
            <a href="auth/login.html" data-action="profile" id="nav-profile">
              <i class="fa-solid fa-user"></i>
            </a>
            <a href="wishlist.html" class="icon-link">
              <i class="fa-solid fa-heart"></i>
              <span id="wishlist-count" class="badge">0</span>
            </a>
            <a href="cart.html" class="icon-link">
              <i class="fa-solid fa-cart-shopping"></i>
              <span id="cart-count" class="badge badge-cart">0</span>
            </a>
          </div>
        </div>
      </div>
    </header>

    <nav class="nav-bar">
      <div class="container nav-inner">
        <a href="index.html">Uy</a>
        <a href="products.html">Mahsulotlar</a>
        <a href="index.html#membership">A'zolik</a>
        <a href="contact.html">Bog'lanish</a>
      </div>
    </nav>
  </div>

  <main class="success-page container">
    <div class="success-icon">
      <i class="fa-solid fa-check"></i>
    </div>
    
    <h1 class="success-title">Buyurtma qabul qilindi!</h1>
    <p class="success-message">Rahmat! Sizning buyurtmangiz muvaffaqiyatli joylashtirildi.</p>

    <div class="order-number">
      <label>Buyurtma raqami</label>
      <strong id="order-id">TH-XXXXXX</strong>
    </div>

    <div class="order-details" id="order-details">
      <h3><i class="fa-solid fa-box"></i> Buyurtma tafsilotlari</h3>
      <div id="order-items"></div>
      <div class="order-totals" id="order-totals"></div>
    </div>

    <div class="success-actions">
      <a href="products.html" class="btn-primary">
        <i class="fa-solid fa-shopping-bag"></i> Xaridni davom ettirish
      </a>
      <a href="index.html" class="btn-secondary">
        <i class="fa-solid fa-home"></i> Bosh sahifaga
      </a>
    </div>

    <div class="contact-info-box">
      <i class="fa-solid fa-phone"></i>
      Savollaringiz bo'lsa, biz bilan bog'laning: <strong>+998 90 791 36 33</strong>
    </div>
  </main>

  <footer class="main-footer">
    <div class="footer-container container">
      <div class="footer-col brand">
        <div class="footer-logo"><a href="index.html">TECH HOUSE</a></div>
        <p>Sifatli maishiy texnika uchun ishonchli hamkoringiz.</p>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Â© TechHouse 2025. Barcha huquqlar himoyalangan.</p>
    </div>
  </footer>

  
  <nav class="bottom-nav" aria-label="Tez navigatsiya">
    <a href="index.html" class="bottom-nav-item">
      <i class="fa-solid fa-home"></i>
      <span>Bosh</span>
    </a>
    <a href="products.html" class="bottom-nav-item">
      <i class="fa-solid fa-th-large"></i>
      <span>Katalog</span>
    </a>
    <a href="cart.html" class="bottom-nav-item">
      <i class="fa-solid fa-cart-shopping"></i>
      <span class="nav-badge" id="bottom-cart-count">0</span>
      <span>Savat</span>
    </a>
    <a href="wishlist.html" class="bottom-nav-item wishlist">
      <i class="fa-solid fa-heart"></i>
      <span class="nav-badge" id="bottom-wishlist-count">0</span>
      <span>Sevimli</span>
    </a>
    <a href="profile.html" class="bottom-nav-item" data-action="profile">
      <i class="fa-solid fa-user"></i>
      <span>Profil</span>
    </a>
  </nav>

  <script src="js/data.js"></script>
  <script src="js/store.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/nav.js"></script>
  <script>
    (function() {
      function init() {
        const orderId = sessionStorage.getItem("lastOrderId");
        
        if (!orderId) {
          document.querySelector(".success-page").innerHTML = `
            <div class="success-empty">
              <i class="fa-solid fa-exclamation-circle"></i>
              <h2>Buyurtma topilmadi</h2>
              <p>Siz hali buyurtma bermagansiz yoki sahifa yangilangan.</p>
              <a href="products.html" class="btn-primary">
                <i class="fa-solid fa-shopping-bag"></i> Xarid qilish
              </a>
            </div>
          `;
          return;
        }

        const order = Store.getOrderById(orderId);
        
        if (!order) {
          document.getElementById("order-id").textContent = orderId;
          document.getElementById("order-details").style.display = "none";
          return;
        }

        document.getElementById("order-id").textContent = order.id;

        const itemsEl = document.getElementById("order-items");
        if (itemsEl && order.items) {
          itemsEl.innerHTML = order.items.map(item => `
            <div class="order-item">
              <img src="${item.image}" alt="${item.name}">
              <div class="order-item-info">
                <h4>${item.name}</h4>
                <small>${item.qty} x ${UI.formatPrice(item.price)}</small>
              </div>
              <span class="order-item-price">${UI.formatPrice(item.subtotal)}</span>
            </div>
          `).join("");
        }

        const totalsEl = document.getElementById("order-totals");
        if (totalsEl) {
          totalsEl.innerHTML = `
            <div class="row">
              <span>Oraliq jami:</span>
              <span>${UI.formatPrice(order.subtotal)}</span>
            </div>
            <div class="row">
              <span>Yetkazib berish:</span>
              <span>${order.shipping === 0 ? 'Bepul' : UI.formatPrice(order.shipping)}</span>
            </div>
            <div class="row total">
              <span>Jami to'lov:</span>
              <span>${UI.formatPrice(order.total)}</span>
            </div>
          `;
        }

        sessionStorage.removeItem("lastOrderId");
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", init);
      } else {
        init();
      }
    })();
  </script>
</body>

</html>
